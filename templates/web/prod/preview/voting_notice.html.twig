<h4>{{ 'preview::tab:feedback list' }}</h4>
<br>
{% if app.getAclForUser(app.getAuthenticatedUser()).has_right(constant('\\ACL::CANMODIFRECORD')) %}
    {% for basket_element in feedbackElementDatas %}
        <dl class="feedback-data-list" style="margin-bottom:15px;margin-top:0px;padding-bottom:15px;position:relative;">
            <dt>
                {{ basket_element.getBasket().getName() }}

                {% if basket_element.getBasket().getValidation().getExpires() < date() %}
                    ( {{ 'preview::tab:feedback closed' | trans }} )
                {% else %}
                    ( {{ 'preview::tab:feedback open' | trans }} )
                {% endif %}
            </dt>
                <dd style="color:#afb0b1;text-align:center;margin-bottom:10px;">
                    {% set initiator = basket_element.getBasket().getValidation().getInitiator().getDisplayName() %}
                    {% set createdDate = app['date-formatter'].getDateTranslated(basket_element.getBasket().getValidation().getCreated()) %}

                    {% trans with {'%initiator%' : initiator, '%createdDate%': createdDate} %}Feedback:: Requested by %initiator% on %createdDate%{% endtrans %}
                </dd>

                {% for choice in basket_element.getValidationDatas() %}
                    {% if choice.getParticipant().getCanAgree() %}
                        <dd style="margin-bottom: 5px;position:relative;">
                            <span style="position:relative;background: #3b3b3b;z-index:1;padding-right:10px">{{ choice.getParticipant().getUser().getDisplayName() }}</span>
                            <span style="position: absolute;width:calc(100% - 60px);border-bottom:1px solid #484848;height: 43%;right:30px;left:30px;top:0;"></span>
                            {% if choice.getAgreement() == true %}
                                <img style="cursor:help;float:right;" src='/assets/common/images/icons/green-check.png' title="{{ "L'utilisateur approuve ce document" | trans }}" />
                            {% elseif choice.getAgreement() is null %}
                                <img style="cursor:help;float:right;" src='/assets/common/images/icons/no-response.png' title="{{ "L'utilisateur n'a pas encore donne son avis sur ce document" | trans }}" />
                            {% else %}
                                <img style="cursor:help;float:right;" src='/assets/common/images/icons/red-cross.png' title="{{ "L'utilisateur desapprouve ce document" | trans }}" />
                            {% endif %}
                        </dd>
                    {% endif %}
                {% endfor %}
        </dl>
    {% endfor %}
{% endif %}
